{"ast":null,"code":"import { useCallback, useEffect, useState } from \"react\";\nimport { SCALE_Y_CLASSNAMES } from \"@react-md/transition\";\nimport { containsElement, TOP_INNER_LEFT_ANCHOR, useEnsuredRef } from \"@react-md/utils\";\nvar DEFAULT_CONTEXT_MENU_ID = \"context-menu\";\nexport default function useContextMenu(_a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.id,\n      id = _c === void 0 ? DEFAULT_CONTEXT_MENU_ID : _c,\n      propRef = _b.ref,\n      _d = _b.anchor,\n      anchor = _d === void 0 ? TOP_INNER_LEFT_ANCHOR : _d,\n      _e = _b.classNames,\n      classNames = _e === void 0 ? SCALE_Y_CLASSNAMES : _e,\n      _f = _b.disableDeselect,\n      disableDeselect = _f === void 0 ? false : _f;\n\n  var _g = useState(false),\n      visible = _g[0],\n      setVisible = _g[1];\n\n  var onRequestClose = useCallback(function () {\n    setVisible(false);\n  }, []);\n\n  var _h = useState({}),\n      coords = _h[0],\n      setCoords = _h[1];\n\n  var onContextMenu = useCallback(function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    var selection = window.getSelection();\n\n    if (selection && !disableDeselect) {\n      selection.empty();\n    }\n\n    setVisible(true);\n\n    if (event.button === 0 && event.buttons === 0) {\n      setCoords({});\n      return;\n    }\n\n    setCoords({\n      initialX: event.clientX,\n      initialY: event.clientY\n    });\n  }, [disableDeselect]);\n\n  var _j = useEnsuredRef(propRef),\n      ref = _j[0],\n      refHandler = _j[1];\n\n  useEffect(function () {\n    if (!visible) {\n      return;\n    }\n\n    var hide = function (event) {\n      var target = event.target;\n\n      if (!containsElement(ref, target)) {\n        onRequestClose();\n      }\n    };\n\n    window.addEventListener(\"contextmenu\", hide, true);\n    return function () {\n      window.removeEventListener(\"contextmenu\", hide, true);\n    };\n  }, [onRequestClose, visible, ref]);\n  var menuProps = {\n    id: id,\n    ref: refHandler,\n    anchor: anchor,\n    visible: visible,\n    classNames: classNames,\n    onRequestClose: onRequestClose,\n    positionOptions: coords,\n    disableControlClickOkay: true\n  };\n  return [menuProps, onContextMenu, setVisible];\n}","map":{"version":3,"sources":["../src/useContextMenu.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { useCallback, useEffect, useState, } from \"react\";\nimport { SCALE_Y_CLASSNAMES } from \"@react-md/transition\";\nimport { containsElement, TOP_INNER_LEFT_ANCHOR, useEnsuredRef, } from \"@react-md/utils\";\nvar DEFAULT_CONTEXT_MENU_ID = \"context-menu\";\nexport default function useContextMenu(_a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.id, id = _c === void 0 ? DEFAULT_CONTEXT_MENU_ID : _c, propRef = _b.ref, _d = _b.anchor, anchor = _d === void 0 ? TOP_INNER_LEFT_ANCHOR : _d, _e = _b.classNames, classNames = _e === void 0 ? SCALE_Y_CLASSNAMES : _e, _f = _b.disableDeselect, disableDeselect = _f === void 0 ? false : _f;\n    var _g = useState(false), visible = _g[0], setVisible = _g[1];\n    var onRequestClose = useCallback(function () {\n        setVisible(false);\n    }, []);\n    var _h = useState({}), coords = _h[0], setCoords = _h[1];\n    var onContextMenu = useCallback(function (event) {\n        event.preventDefault();\n        event.stopPropagation();\n        var selection = window.getSelection();\n        if (selection && !disableDeselect) {\n            selection.empty();\n        }\n        setVisible(true);\n        if (event.button === 0 && event.buttons === 0) {\n            setCoords({});\n            return;\n        }\n        setCoords({ initialX: event.clientX, initialY: event.clientY });\n    }, [disableDeselect]);\n    var _j = useEnsuredRef(propRef), ref = _j[0], refHandler = _j[1];\n    useEffect(function () {\n        if (!visible) {\n            return;\n        }\n        var hide = function (event) {\n            var target = event.target;\n            if (!containsElement(ref, target)) {\n                onRequestClose();\n            }\n        };\n        window.addEventListener(\"contextmenu\", hide, true);\n        return function () {\n            window.removeEventListener(\"contextmenu\", hide, true);\n        };\n    }, [onRequestClose, visible, ref]);\n    var menuProps = {\n        id: id,\n        ref: refHandler,\n        anchor: anchor,\n        visible: visible,\n        classNames: classNames,\n        onRequestClose: onRequestClose,\n        positionOptions: coords,\n        disableControlClickOkay: true,\n    };\n    return [menuProps, onContextMenu, setVisible];\n}\n//# sourceMappingURL=useContextMenu.js.map"]},"metadata":{},"sourceType":"module"}