{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\Shaji Project\\\\frontEnd\\\\src\\\\user\\\\Signup.js\";\nimport React, { useState } from \"react\";\nimport Base from \"../core/Base\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { signup } from \"../auth/helper\";\nimport { v4 as uuidv4 } from 'uuid';\nimport UserBase from \"./UserBase\";\nimport Map from \"mapmyindia-react\";\nimport \"./UserBase.css\";\nimport { getUserAddress } from \"./helper/lochelper\";\n\nconst Signup = () => {\n  const [values, setValues] = useState({\n    name: \"\",\n    phone: \"\",\n    error: \"\",\n    uid: \"\",\n    location: \"\",\n    isRedirect: false,\n    userAlready: false,\n    success: false,\n    loading: false\n  });\n  const [latitude, setLatitude] = useState(\"\");\n  const [longitude, setLongitude] = useState(\"\");\n  const [ulocation, setulocation] = useState(\"\");\n\n  const getGLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(getCoordinates, handleLocationError);\n    } else {\n      alert(\"Geolocation is not supported by this browser.\");\n    }\n  };\n\n  const getCoordinates = position => {\n    console.log(position.coords.latitude);\n    setLatitude(position.coords.latitude);\n    console.log(position.coords.longitude);\n    setLongitude(position.coords.longitude);\n  };\n\n  const handleLocationError = error => {\n    switch (error.code) {\n      case error.PERMISSION_DENIED:\n        alert(\"User denied the request for Geolocation.\");\n        break;\n\n      case error.POSITION_UNAVAILABLE:\n        alert(\"Location information is unavailable.\");\n        break;\n\n      case error.TIMEOUT:\n        alert(\"The request to get user location timed out.\");\n        break;\n\n      case error.UNKNOWN_ERROR:\n        alert(\"An unknown error occurred.\");\n        break;\n\n      default:\n        alert(\"An unknown error accurder type ur address manually\");\n    }\n  };\n\n  const shoemap = () => {\n    if (latitude && longitude) {\n      const loc = {\n        \"latitude\": latitude,\n        \"longitude\": longitude\n      };\n      getUserAddress(loc).then(res => {\n        console.log(\"DATA _> \", res); // setValues({...values,location:res.loc})\n\n        setulocation(res.loc);\n      }).catch(err => {// console.log(err);\n      });\n    }\n  };\n\n  const onLoadMap = () => {\n    return /*#__PURE__*/React.createElement(Map, {\n      markers: [{\n        position: [10.9006464, 76.996596],\n        draggable: true,\n        title: \"Shaji Dhaba\",\n        onClick: e => {\n          console.log(\"clicked \");\n        },\n        onDragend: e => {\n          console.log(\"dragged\");\n        }\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    });\n  };\n\n  const [code, setcode] = useState(\"\");\n  const {\n    name,\n    phone,\n    error,\n    success,\n    loading,\n    location,\n    isRedirect,\n    uid,\n    userAlready\n  } = values;\n\n  const handleChange = name => event => {\n    setValues({ ...values,\n      error: false,\n      [name]: event.target.value\n    });\n  };\n\n  const onRedirected = () => {\n    if (isRedirect) {\n      const Path = \"/verification/\" + uid;\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: Path,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 14\n        }\n      });\n    }\n  };\n\n  const alredyAUser = () => {\n    if (userAlready) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 14\n        }\n      });\n    }\n  };\n\n  const onSubmit = event => {\n    const CODE = uuidv4().substr(1, 4);\n    setcode(CODE);\n    console.log(\"CODE : \", code);\n    event.preventDefault();\n    setValues({ ...values,\n      error: false,\n      code: CODE\n    });\n    signup({\n      name,\n      phone,\n      code\n    }).then(data => {\n      if (data.error) {\n        setValues({ ...values,\n          error: data.error,\n          success: false\n        });\n      } else {\n        console.log(data);\n\n        if (data.userAlready) {\n          setValues({ ...values,\n            userAlready: true\n          });\n        }\n\n        console.log(\"user Id : \", data.id);\n        setValues({ ...values,\n          name: \"\",\n          phone: \"\",\n          error: \"\",\n          uid: data.id,\n          isRedirect: true,\n          success: true\n        });\n      }\n    }).catch(console.log(\"Error in signup\"));\n  };\n\n  const successMessage = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-sm-3 text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-success\",\n      style: {\n        display: success ? \"\" : \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }, \"New account was created successfully. Please\", /*#__PURE__*/React.createElement(Link, {\n      to: \"/signin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 14\n      }\n    }, \"Login Here\"))));\n  };\n\n  const errorMessage = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-sm-3 text-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alert alert-danger\",\n      style: {\n        display: error ? \"\" : \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }\n    }, error)));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"userbase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 5\n    }\n  }, successMessage(), onRedirected(), shoemap(), /*#__PURE__*/React.createElement(UserBase, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"exampleInputEmail1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 5\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange(\"name\"),\n    type: \"text\",\n    class: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 5\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"exampleInputPassword1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }\n  }, \"Phone\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleChange(\"phone\"),\n    type: \"number\",\n    class: \"form-control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 5\n    }\n  })), onLoadMap(), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: onSubmit,\n    class: \"btn btn-warning btn-block rounded\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 3\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"alreadyuser mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 35\n    }\n  }, \"If use are already a user, please sigin below\"), \" \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"signinbtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-info rounded\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }\n  }, \"Signin\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: getGLocation,\n    className: \"btn btn-info btn-block mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 5\n    }\n  }, \"Get My Delivery Location\")))));\n};\n\nexport default Signup;","map":{"version":3,"sources":["C:/Users/user/Desktop/Shaji Project/frontEnd/src/user/Signup.js"],"names":["React","useState","Base","Link","Redirect","signup","v4","uuidv4","UserBase","Map","getUserAddress","Signup","values","setValues","name","phone","error","uid","location","isRedirect","userAlready","success","loading","latitude","setLatitude","longitude","setLongitude","ulocation","setulocation","getGLocation","navigator","geolocation","getCurrentPosition","getCoordinates","handleLocationError","alert","position","console","log","coords","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","UNKNOWN_ERROR","shoemap","loc","then","res","catch","err","onLoadMap","draggable","title","onClick","e","onDragend","setcode","handleChange","event","target","value","onRedirected","Path","alredyAUser","onSubmit","CODE","substr","preventDefault","data","id","successMessage","display","errorMessage"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Base from \"../core/Base\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { signup } from \"../auth/helper\";\nimport { v4 as uuidv4 } from 'uuid';\nimport UserBase from \"./UserBase\";\nimport Map from \"mapmyindia-react\";\nimport \"./UserBase.css\"\nimport {getUserAddress} from \"./helper/lochelper\"\nconst Signup = () => {\n  const [values, setValues] = useState({\n    name: \"\",\n    phone: \"\",\n    error: \"\",\n    uid:\"\",\n    location:\"\",\n    isRedirect:false,\n    userAlready:false,\n    success: false,\n    loading:false\n  });\n  const [latitude,setLatitude] = useState(\"\");\n  const [longitude,setLongitude] = useState(\"\");\n\n  const [ulocation, setulocation] = useState(\"\");\n  const getGLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(getCoordinates,handleLocationError);\n    } else {\n      alert(\"Geolocation is not supported by this browser.\");\n    }\n  }\n  const getCoordinates = (position) => {\n    console.log(position.coords.latitude)\n    setLatitude(position.coords.latitude)\n    console.log(position.coords.longitude)\n    setLongitude(position.coords.longitude)\n\n  }\n  const handleLocationError  =(error) => {\n    switch(error.code) {\n      case error.PERMISSION_DENIED:\n        alert(\"User denied the request for Geolocation.\")\n        break;\n      case error.POSITION_UNAVAILABLE:\n        alert(\"Location information is unavailable.\")\n        break;\n      case error.TIMEOUT:\n        alert(\"The request to get user location timed out.\")\n        break;\n      case error.UNKNOWN_ERROR:\n        alert(\"An unknown error occurred.\")\n        break;\n        default:\n          alert(\"An unknown error accurder type ur address manually\");\n    }\n  }\n  const shoemap  = () => {\n    if(latitude && longitude){\n      const loc = {\"latitude\":latitude,\"longitude\":longitude}\n      getUserAddress(loc).then(res => {\n        console.log(\"DATA _> \",res);\n        // setValues({...values,location:res.loc})\n        setulocation(res.loc)\n      })\n      .catch(err => {\n        // console.log(err);\n      })\n  }\n  }\n  const onLoadMap = () => {\n    return(\n        <Map\n    markers={[\n      {\n        position: [10.9006464, 76.996596],\n        draggable: true,\n        title: \"Shaji Dhaba\",\n        onClick: e => {\n          console.log(\"clicked \");\n        },\n        onDragend: e => {\n          console.log(\"dragged\");\n        }\n      }\n    ]}\n  />\n    )\n}\n  const [code, setcode] = useState(\"\")\n  const { name, phone, error, success ,loading,location,isRedirect,uid,userAlready} = values;\n\n  const handleChange = name => event => {\n    setValues({ ...values, error: false, [name]: event.target.value });\n  };\n  const onRedirected = () => {\n    if(isRedirect){\n      const Path = \"/verification/\"+uid\n      return <Redirect to={Path}/>\n    }\n  }\n\n  const alredyAUser = () =>{\n\n    if(userAlready){\n      return <Redirect/>\n    }\n  }\n  const onSubmit = event => {\n    const CODE = uuidv4().substr(1, 4);\n    setcode(CODE)\n    console.log(\"CODE : \",code);\n\n    event.preventDefault();\n    setValues({ ...values, error: false,code:CODE });\n    signup({ name, phone,code })\n      .then(data => {\n        if (data.error) {\n          setValues({ ...values, error: data.error, success: false });\n        } else {\n          console.log(data);\n          if(data.userAlready){\n              setValues({\n                ...values,\n                userAlready:true\n              })\n          }\n          console.log(\"user Id : \",data.id);\n\n          setValues({\n            ...values,\n            name: \"\",\n            phone: \"\",\n            error: \"\",\n            uid:data.id,\n            isRedirect:true,\n            success: true\n          });\n        }\n      })\n      .catch(console.log(\"Error in signup\"));\n  };\n\n  \n\n  const successMessage = () => {\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-sm-3 text-left\">\n          <div\n            className=\"alert alert-success\"\n            style={{ display: success ? \"\" : \"none\" }}\n          >\n            New account was created successfully. Please\n             <Link to=\"/signin\">Login Here</Link> \n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const errorMessage = () => {\n    return (\n      <div className=\"row\">\n        <div className=\"col-md-6 offset-sm-3 text-left\">\n          <div\n            className=\"alert alert-danger\"\n            style={{ display: error ? \"\" : \"none\" }}\n          >\n            {error}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"userbase\">\n      {successMessage()}\n      {onRedirected()}\n      {shoemap()}\n    <UserBase/>\n      <div>\n        <div className=\"container mt-5\">\n        <form>\n  <div class=\"form-group\">\n    <label for=\"exampleInputEmail1\">Name</label>\n    <input onChange={handleChange(\"name\")} type=\"text\" class=\"form-control\"/>\n  </div>\n  <div class=\"form-group\">\n    <label for=\"exampleInputPassword1\">Phone</label>\n    <input onChange={handleChange(\"phone\")} type=\"number\" class=\"form-control\"/>\n  </div>\n  {onLoadMap()}\n\n  <div>\n    \n  <button type=\"submit\" onClick={onSubmit} class=\"btn btn-warning btn-block rounded\">Submit</button>\n  <p className=\"alreadyuser mt-4\"><small>If use are already a user, please sigin below</small> </p>\n  <div className=\"signinbtn\">\n    <Link to=\"/signin\">\n\n    <button className=\"btn btn-info rounded\">\n      Signin\n    </button> \n    </Link>\n \n  </div>\n    \n  </div>\n</form>\n<div>\n    <button onClick={getGLocation} className=\"btn btn-info btn-block mt-4\">\n      Get My Delivery Location\n    </button>\n  </div>\n        </div>\n      \n      </div>\n  \n    </div>\n  );\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}